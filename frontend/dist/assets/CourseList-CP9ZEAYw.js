import{_ as M,r as u,k as S,l as j,j as m,o as i,f as t,a as h,e as s,w as l,b as a,d as q,h as d,F as G,m as P,n as T,t as y,E as H}from"./index-BotqV5dR.js";import{c as w}from"./modules-CiYeg_KF.js";import"./request-BUaFPsLP.js";const J={class:"page-container"},K={class:"page-header"},O={key:0,class:"loading-container"},Q={key:1,class:"empty-state"},W=["onClick"],X={class:"cover-text"},Y={class:"course-content"},Z={class:"course-main"},ee=["title"],oe={class:"course-desc"},te={class:"course-footer"},se={class:"enter-text"},le={class:"dialog-footer"},ae={__name:"CourseList",setup(ne){const N=q(),_=u([]),p=u(!1),c=u(!1),f=u(!1),g=u(null),r=S({courseName:"",description:""}),V={courseName:[{required:!0,message:"请输入课程名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}]},C=async()=>{p.value=!0;try{const n=await w.getAllCourses();_.value=n}catch(n){console.error(n)}finally{p.value=!1}},x=n=>{N.push(`/teacher/course/${n}/overview`)},A=async()=>{g.value&&await g.value.validate(async n=>{if(n){f.value=!0;try{await w.createCourse(r),H.success("课程创建成功"),c.value=!1,r.courseName="",r.description="",C()}catch(e){console.error(e)}finally{f.value=!1}}})},R=n=>{const e=["grad-1","grad-2","grad-3","grad-4"];return e[n%e.length]};return j(()=>{C()}),(n,e)=>{const v=a("el-button"),z=a("el-skeleton"),B=a("el-empty"),I=a("el-tag"),U=a("ArrowRight"),$=a("el-icon"),E=a("el-col"),L=a("el-row"),k=a("el-input"),b=a("el-form-item"),D=a("el-form"),F=a("el-dialog");return i(),m("div",J,[t("div",K,[e[6]||(e[6]=t("div",{class:"header-left"},[t("h2",null,"课程管理"),t("p",{class:"subtitle"},"管理您的所有教学课程")],-1)),s(v,{type:"primary",size:"large",icon:"Plus",onClick:e[0]||(e[0]=o=>c.value=!0)},{default:l(()=>[...e[5]||(e[5]=[d(" 创建新课程 ",-1)])]),_:1})]),p.value?(i(),m("div",O,[s(z,{rows:5,animated:""})])):_.value.length===0?(i(),m("div",Q,[s(B,{description:"暂无课程，快去创建吧！"})])):(i(),h(L,{key:2,gutter:24},{default:l(()=>[(i(!0),m(G,null,P(_.value,o=>(i(),h(E,{xs:24,sm:12,md:8,lg:6,key:o.courseId},{default:l(()=>[t("div",{class:"course-card",onClick:re=>x(o.courseId)},[t("div",{class:T(["course-cover",R(o.courseId)])},[t("span",X,y(o.courseName?o.courseName.charAt(0).toUpperCase():"C"),1)],2),t("div",Y,[t("div",Z,[t("h3",{class:"course-title",title:o.courseName},y(o.courseName),9,ee),t("p",oe,y(o.description||"暂无描述"),1)]),t("div",te,[s(I,{size:"small",effect:"light",round:""},{default:l(()=>[...e[7]||(e[7]=[d("进行中",-1)])]),_:1}),t("span",se,[e[8]||(e[8]=d("进入管理 ",-1)),s($,null,{default:l(()=>[s(U)]),_:1})])])])],8,W)]),_:2},1024))),128))]),_:1})),s(F,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=o=>c.value=o),title:"创建新课程",width:"500px","destroy-on-close":"",class:"custom-dialog"},{footer:l(()=>[t("span",le,[s(v,{onClick:e[3]||(e[3]=o=>c.value=!1)},{default:l(()=>[...e[9]||(e[9]=[d("取消",-1)])]),_:1}),s(v,{type:"primary",onClick:A,loading:f.value},{default:l(()=>[...e[10]||(e[10]=[d(" 立即创建 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[s(D,{model:r,rules:V,ref_key:"formRef",ref:g,"label-position":"top"},{default:l(()=>[s(b,{label:"课程名称",prop:"courseName"},{default:l(()=>[s(k,{modelValue:r.courseName,"onUpdate:modelValue":e[1]||(e[1]=o=>r.courseName=o),placeholder:"请输入课程名称",size:"large"},null,8,["modelValue"])]),_:1}),s(b,{label:"课程描述",prop:"description"},{default:l(()=>[s(k,{modelValue:r.description,"onUpdate:modelValue":e[2]||(e[2]=o=>r.description=o),type:"textarea",rows:4,placeholder:"请输入课程简介..."},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},de=M(ae,[["__scopeId","data-v-06ff5177"]]);export{de as default};
